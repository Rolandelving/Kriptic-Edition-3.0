<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kriptic Edition 3.0 | Premium Entertainment Hub</title>
    <meta name="description" content="Professional astronomy-themed entertainment platform with movies, games, and community features.">
    
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <!-- Google Analytics & Adsense-->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-Z2W798YNJP"></script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7452690493067355"
     crossorigin="anonymous"></script>
    <style>
        @font-face {
            font-family: 'DripOctober';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/DripOctober-vm0JA%5B1%5D.ttf') format('truetype');
        }
        @font-face {
            font-family: 'Chainsaw Carnage';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/ChainsawCarnage%5B1%5D.ttf') format('truetype');
        }
        @font-face {
            font-family: 'Halloween';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/SuperCursed.ttf') format('truetype');
        }
        @font-face {
            font-family: 'CrotahItalic';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/CrotahFreeVersionItalic-z8Ev3.ttf') format('truetype');
        }
        @font-face {
            font-family: 'Dangernight';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/Dangernight-vnZ5y.otf') format('opentype');
        }
        @font-face {
            font-family: 'HeavyJack';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/HeavyJack-DYz7R.ttf') format('truetype');
        }
        @font-face {
            font-family: 'Marlita';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/MarlitaDemo-2vXRK.otf') format('opentype');
        }
        @font-face {
            font-family: 'MockBear';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/MockBear-3lgA8.ttf') format('truetype');
        }
        @font-face {
            font-family: 'Mulinarstamp';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/MulinarstampRegularDemo-q2V9d.otf') format('opentype');
        }
        @font-face {
            font-family: 'UnderThreat';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/UnderThreatDemo-vnVD4.ttf') format('truetype');
        }
        @font-face {
            font-family: 'BlackDahlia';
            src: url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/BlackDahlia-LBRG.woff2') format('woff2'),
                 url('https://cdn.jsdelivr.net/gh/Rolandelving/krptcedtn@main/BlackDahlia-LBRG_1_.woff') format('woff');
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'DripOctober', 'Segoe UI', sans-serif;
            background: radial-gradient(ellipse at top, #0a0e27, #000000),
                        radial-gradient(ellipse at bottom, #1a1a3e, #000000);
            color: #e0e7ff;
            overflow-x: hidden;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        /* Starfield with Parallax */
        .starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            pointer-events: none;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            box-shadow: 0 0 4px rgba(255, 255, 255, 0.8);
            animation: twinkle linear infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* Gravitational Cursor Effect */
        #cursorGravity {
            position: fixed;
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--primary) 0%, transparent 70%);
            pointer-events: none;
            z-index: 5;
            mix-blend-mode: screen;
            filter: blur(40px);
            transition: transform 0.1s ease-out;
            opacity: 0.15;
        }

        /* Theme Variables */
        :root {
            --primary: #6495ff;
            --secondary: #9d7dff;
            --accent: #00d9ff;
        }

        body.theme-nebula {
            --primary: #6495ff;
            --secondary: #9d7dff;
            --accent: #00d9ff;
        }

        body.theme-aurora {
            --primary: #00ff88;
            --secondary: #00ffff;
            --accent: #88ff00;
        }

        body.theme-supernova {
            --primary: #ff6b35;
            --secondary: #ff0055;
            --accent: #ffaa00;
        }

        body.theme-galaxy {
            --primary: #667eea;
            --secondary: #764ba2;
            --accent: #f093fb;
        }

        body.theme-creme {
            --primary: #d4a574;
            --secondary: #c9a581;
            --accent: #f9f5f0;
        }

        body.theme-void {
            --primary: #1a1a1a;
            --secondary: #4a4a4a;
            --accent: #ffffff;
        }

        body.theme-plasma {
            --primary: #ff00ff;
            --secondary: #00ffff;
            --accent: #ffff00;
        }

        body.theme-solar {
            --primary: #ffaa00;
            --secondary: #ff6600;
            --accent: #ffdd00;
        }

        body.theme-lunar {
            --primary: #c0c0c0;
            --secondary: #e0e0e0;
            --accent: #ffffff;
        }

        body.theme-cosmic {
            --primary: #ff1493;
            --secondary: #00bfff;
            --accent: #7fff00;
        }

        /* Controls Panel */
        .controls-panel {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.8);
            padding: 1.5rem;
            border-radius: 16px;
            border: 2px solid var(--primary);
            backdrop-filter: blur(30px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
            min-width: 250px;
            transition: all 0.3s ease;
        }

        .controls-panel.collapsed {
            padding: 0;
            min-width: 0;
            width: 0;
            height: 0;
            opacity: 0;
            pointer-events: none;
            transform: scale(0);
        }

        .controls-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .controls-close {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
            font-size: 1.2rem;
        }

        .controls-close:hover {
            background: rgba(255, 0, 0, 0.3);
            transform: rotate(90deg);
        }

        .controls-toggle {
            position: fixed;
            top: 2rem;
            right: 2rem;
            z-index: 999;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid var(--primary);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(20px);
            transition: all 0.3s;
            font-size: 1.5rem;
        }

        .controls-toggle.visible {
            display: flex;
        }

        .controls-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px var(--primary);
        }

        .control-label {
            font-size: 0.75rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 0.15em;
            margin-bottom: 0.75rem;
            display: block;
        }

        .theme-options {
            display: flex;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
        }

        .theme-btn {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }

        .theme-btn:hover {
            transform: scale(1.15);
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 30px currentColor;
        }

        .theme-btn.active {
            border-color: #ffffff;
            box-shadow: 0 0 40px currentColor, 0 0 20px #ffffff;
            transform: scale(1.2);
        }

        .theme-nebula-btn { background: linear-gradient(135deg, #6495ff, #9d7dff, #00d9ff); }
        .theme-aurora-btn { background: linear-gradient(135deg, #00ff88, #00ffff, #88ff00); }
        .theme-supernova-btn { background: linear-gradient(135deg, #ff6b35, #ff0055, #ffaa00); }
        .theme-galaxy-btn { background: linear-gradient(135deg, #667eea, #764ba2, #f093fb); }
        .theme-creme-btn { background: linear-gradient(135deg, #f9f5f0, #f1e9dc, #d4a574); }
        .theme-void-btn { background: linear-gradient(135deg, #1a1a1a, #4a4a4a, #ffffff); }
        .theme-plasma-btn { background: linear-gradient(135deg, #ff00ff, #00ffff, #ffff00); }
        .theme-solar-btn { background: linear-gradient(135deg, #ffaa00, #ff6600, #ffdd00); }
        .theme-lunar-btn { background: linear-gradient(135deg, #c0c0c0, #e0e0e0, #ffffff); }
        .theme-cosmic-btn { background: linear-gradient(135deg, #ff1493, #00bfff, #7fff00); }

        .font-selector {
            width: 100%;
        }

        .font-dropdown {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .font-dropdown:hover {
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
        }

        .font-dropdown:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(var(--accent), 0.3);
        }

        .font-dropdown option {
            background: #1a1a1a;
            color: white;
            padding: 0.5rem;
        }

        .background-selector {
            margin-top: 0.5rem;
        }

        .background-dropdown {
            width: 100%;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
        }

        .background-dropdown:hover {
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
        }

        .background-dropdown:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(var(--accent), 0.3);
        }

        .background-dropdown option {
            background: #1a1a1a;
            color: white;
            padding: 0.5rem;
        }

        /* Header */
        .header {
            position: relative;
            z-index: 10;
            padding: 1.5rem 4rem;
            margin: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(10, 14, 39, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--primary);
        }
        /* ===== MODERN NAVIGATION BAR - REVAMPED ===== */
        .main-nav {
            position: relative;
            z-index: 100;
            background: rgba(5, 8, 20, 0.95);
            backdrop-filter: blur(40px) saturate(180%);
            border-bottom: 1px solid rgba(100, 149, 237, 0.2);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.8);
            margin: 0;
        }
        
        .nav-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .nav-links {
            display: flex;
            gap: 0.5rem;
            list-style: none;
            margin: 0;
            padding: 0;
            align-items: center;
        }
        
        .nav-link {
            position: relative;
            padding: 1.2rem 1.8rem;
            color: rgba(255, 255, 255, 0.75);
            text-decoration: none;
            font-size: 0.9rem;
            font-weight: 600;
            letter-spacing: 0.8px;
            text-transform: uppercase;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.4rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            border-radius: 12px;
            background: transparent;
        }
        
        /* Icon Styling */
        .nav-icon {
            font-size: 1.4rem;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            filter: drop-shadow(0 0 8px currentColor);
        }
        
        /* Hover Effects */
        .nav-link:hover {
            color: #ffffff;
            background: rgba(100, 149, 237, 0.1);
            transform: translateY(-3px);
        }
        
        .nav-link:hover .nav-icon {
            transform: scale(1.15);
            filter: drop-shadow(0 0 15px var(--primary));
        }
        
        /* Active State */
        .nav-link.active {
            color: var(--primary);
            background: rgba(100, 149, 237, 0.15);
            box-shadow: inset 0 -3px 0 var(--primary);
        }
        
        .nav-link.active .nav-icon {
            transform: scale(1.1);
            filter: drop-shadow(0 0 12px var(--primary));
        }
        
        /* Underline Animation */
        .nav-link::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            width: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary), var(--accent), transparent);
            transform: translateX(-50%);
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 2px;
        }
        
        .nav-link:hover::before {
            width: 80%;
        }
        
        /* Glow Effect on Hover */
        .nav-link::after {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at center, var(--primary), transparent);
            opacity: 0;
            transition: opacity 0.4s;
            border-radius: 12px;
            z-index: -1;
        }
        
        .nav-link:hover::after {
            opacity: 0.08;
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: rgba(100, 149, 237, 0.1);
            border: 2px solid var(--primary);
            color: var(--primary);
            font-size: 1.5rem;
            padding: 0.7rem 1.2rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(10px);
        }
        
        .mobile-menu-toggle:hover {
            background: var(--primary);
            color: white;
            box-shadow: 0 0 25px var(--primary);
            transform: scale(1.05);
        }
        
        /* ===== MOBILE RESPONSIVE ===== */
        @media (max-width: 1024px) {
            .nav-container {
                justify-content: space-between;
                padding: 0 1rem;
            }
        
            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                width: 320px;
                height: 100vh;
                background: rgba(5, 8, 20, 0.98);
                backdrop-filter: blur(40px) saturate(180%);
                flex-direction: column;
                padding: 7rem 0 2rem;
                border-left: 2px solid var(--primary);
                transition: right 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                box-shadow: -10px 0 50px rgba(0, 0, 0, 0.8);
                gap: 0;
                justify-content: flex-start;
                overflow-y: auto;
            }
        
            .nav-links.active {
                right: 0;
            }
        
            .mobile-menu-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        
            .nav-link {
                width: 100%;
                padding: 1.8rem 2rem;
                flex-direction: row;
                justify-content: flex-start;
                gap: 1rem;
                border-radius: 0;
                border-left: 4px solid transparent;
            }
        
            .nav-icon {
                font-size: 1.5rem;
            }
        
            .nav-link::before {
                display: none;
            }
        
            .nav-link:hover,
            .nav-link.active {
                background: rgba(100, 149, 237, 0.15);
                border-left-color: var(--primary);
                transform: translateX(0);
            }
        
            .nav-link:hover {
                padding-left: 2.5rem;
            }
        }
        
        @media (max-width: 768px) {
            .nav-links {
                width: 280px;
            }
        
            .nav-link {
                padding: 1.5rem 1.5rem;
                font-size: 0.85rem;
            }
        
            .nav-icon {
                font-size: 1.3rem;
            }
        }
        
        /* ===== CLOSE BUTTON FOR MOBILE MENU ===== */
        @media (max-width: 1024px) {
            .nav-links::before {
                content: '‚úï';
                position: absolute;
                top: 2rem;
                right: 2rem;
                font-size: 2rem;
                color: var(--primary);
                cursor: pointer;
                width: 45px;
                height: 45px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 50%;
                background: rgba(100, 149, 237, 0.1);
                border: 2px solid var(--primary);
                transition: all 0.3s;
            }
        
            .nav-links::before:hover {
                background: var(--primary);
                color: white;
                transform: rotate(90deg);
            }
        }
        
        /* ===== ACCESSIBILITY ===== */
        .nav-link:focus {
            outline: 2px solid var(--primary);
            outline-offset: 4px;
        }
        
        .nav-link:focus:not(:focus-visible) {
            outline: none;
        }
        
        /* ===== SMOOTH SCROLLING WHEN CLICKING LINKS ===== */
        html {
            scroll-behavior: smooth;
        }
        
        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            background: none;
            border: 2px solid var(--primary);
            color: var(--primary);
            font-size: 1.5rem;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mobile-menu-toggle:hover {
            background: var(--primary);
            color: white;
            box-shadow: 0 0 20px var(--primary);
        }

/* Mobile Responsive */
@media (max-width: 1024px) {
    .nav-links {
        position: fixed;
        top: 0;
        right: -100%;
        width: 300px;
        height: 100vh;
        background: rgba(10, 14, 39, 0.98);
        backdrop-filter: blur(30px);
        flex-direction: column;
        padding: 6rem 0 2rem;
        border-left: 2px solid var(--primary);
        transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: -10px 0 40px rgba(0, 0, 0, 0.5);
        gap: 0;
        justify-content: flex-start;
    }

    .nav-links.active {
        right: 0;
    }

    .mobile-menu-toggle {
        display: block;
    }

    .nav-link {
        width: 100%;
        padding: 1.5rem 2rem;
        justify-content: flex-start;
    }

    .nav-link::before {
        left: 0;
        transform: none;
        width: 3px;
        height: 0;
        background: linear-gradient(180deg, var(--primary), var(--accent));
    }

    .nav-link:hover::before,
    .nav-link.active::before {
        height: 100%;
        width: 3px;
    }
}
        .logo {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 3px;
            text-shadow: 0 0 30px var(--primary);
        }

        .visitor-badge {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(0, 0, 0, 0.5);
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            border: 1px solid var(--primary);
        }

        .visitor-count {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .visitor-label {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.6);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Hero Section */
        .hero {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 6rem 2rem 4rem;
        }

        .hero-title {
            font-size: clamp(3rem, 8vw, 5rem);
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #ffffff, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 2px;
            animation: titleGlow 3s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { filter: drop-shadow(0 0 20px var(--primary)); }
            50% { filter: drop-shadow(0 0 40px var(--primary)); }
        }

        .hero-subtitle {
            font-size: clamp(1rem, 2vw, 1.3rem);
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 2px;
            margin-bottom: 1rem;
        }

        .hero-description {
            font-size: clamp(0.9rem, 1.5vw, 1.1rem);
            color: rgba(255, 255, 255, 0.5);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Navigation Grid */
        .nav-section {
            position: relative;
            z-index: 10;
            padding: 4rem 4rem 6rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .nav-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
        }

        .nav-card {
            position: relative;
            background: rgba(10, 14, 39, 0.6);
            border: 1px solid var(--primary);
            border-radius: 20px;
            padding: 2.5rem;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            text-decoration: none;
            color: inherit;
            display: block;
            backdrop-filter: blur(20px);
            overflow: hidden;
        }

        .nav-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), 
                        var(--primary) 0%, 
                        transparent 50%);
            opacity: 0;
            transition: opacity 0.4s;
        }

        .nav-card:hover::before {
            opacity: 0.15;
        }

        .nav-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent);
            box-shadow: 0 20px 60px var(--primary),
                        0 0 80px var(--secondary);
        }

        .nav-icon {
            width: 60px;
            height: 60px;
            margin-bottom: 1.5rem;
            stroke: var(--primary);
            filter: drop-shadow(0 0 10px var(--primary));
            transition: all 0.4s;
        }

        .nav-card:hover .nav-icon {
            stroke: var(--accent);
            transform: scale(1.1) rotate(5deg);
            filter: drop-shadow(0 0 20px var(--accent));
        }

        .nav-title {
            font-size: 1.8rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: #ffffff;
        }

        .nav-description {
            font-size: 1rem;
            color: rgba(255, 255, 255, 0.6);
            line-height: 1.6;
        }

        /* Polls Section */
        .polls-section {
            position: relative;
            z-index: 10;
            padding: 6rem 4rem;
            background: rgba(10, 14, 39, 0.8);
            border-top: 1px solid var(--primary);
        }

        .polls-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .polls-title {
            font-size: clamp(2.5rem, 5vw, 4rem);
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1rem;
        }

        .polls-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.6);
        }

        #pollContainer {
            max-width: 1000px;
            margin: 0 auto;
        }

        .poll-card {
            background: rgba(10, 14, 39, 0.8);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 2.5rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(30px);
            transition: all 0.3s;
        }

        .poll-card:hover {
            border-color: var(--accent);
            box-shadow: 0 10px 40px var(--primary);
        }

        .poll-question {
            font-size: 1.8rem;
            color: var(--primary);
            margin-bottom: 2rem;
            font-weight: 600;
        }

        .poll-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .poll-option {
            position: relative;
            padding: 1.5rem;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
            overflow: hidden;
        }

        .poll-option::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: var(--vote-percent, 0%);
            background: linear-gradient(90deg, var(--primary), transparent);
            opacity: 0.3;
            transition: width 0.5s ease;
            z-index: 0;
        }

        .poll-option:hover {
            border-color: var(--primary);
            background: var(--primary);
            background-opacity: 0.1;
        }

        .poll-option.selected {
            border-color: var(--accent);
            background: var(--accent);
            background-opacity: 0.15;
            box-shadow: 0 0 20px var(--accent);
        }

        .poll-option-text {
            position: relative;
            z-index: 1;
            font-size: 1.1rem;
            color: white;
        }

        .poll-option-stats {
            position: relative;
            z-index: 1;
            display: flex;
            gap: 1rem;
            align-items: center;
            color: rgba(255, 255, 255, 0.7);
        }

        .poll-vote-count {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
        }

        .poll-option.selected .poll-vote-count {
            background: var(--accent);
            color: black;
        }

        .poll-option.disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }

        .poll-option.disabled:hover {
            border-color: rgba(255, 255, 255, 0.1);
            background: rgba(255, 255, 255, 0.03);
        }

        .poll-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .poll-meta {
            color: rgba(255, 255, 255, 0.5);
        }

        .poll-submit-btn {
            padding: 1rem 2.5rem;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: white;
            font-size: 1rem;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 20px var(--primary);
        }

        .poll-submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 30px var(--primary);
        }

        .poll-submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .poll-message {
            padding: 1rem 1.5rem;
            border-radius: 10px;
            margin-bottom: 1.5rem;
            text-align: center;
            animation: slideIn 0.3s ease;
        }

        .poll-message.success {
            background: rgba(100, 255, 150, 0.1);
            border: 2px solid rgba(100, 255, 150, 0.5);
            color: #64ff96;
        }

        .poll-message.error {
            background: rgba(255, 100, 100, 0.1);
            border: 2px solid rgba(255, 100, 100, 0.5);
            color: #ff6464;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .poll-loading {
            text-align: center;
            padding: 3rem;
            color: var(--primary);
            font-size: 1.2rem;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
        }
        /* ===== SCROLL TO TOP BUTTON ===== */
        .scroll-to-top {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            border: 2px solid var(--accent);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s;
            z-index: 9998;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .scroll-to-top.visible {
            opacity: 1;
            visibility: visible;
        }
        
        .scroll-to-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px var(--primary);
        }
        
        .scroll-to-top::before {
            content: '‚Üë';
            font-size: 2rem;
            color: white;
        }

        /* ===== DEBUG PANEL (VISIBLE ON PAGE) ===== */
        .debug-panel {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 350px;
            background: rgba(10, 14, 39, 0.95);
            border: 2px solid var(--primary);
            border-radius: 15px;
            padding: 1.5rem;
            z-index: 10000;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
            font-size: 0.9rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .debug-panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid var(--primary);
        }

        .debug-panel-title {
            color: var(--primary);
            font-weight: 700;
            font-size: 1rem;
        }

        .debug-close-btn {
            background: none;
            border: none;
            color: var(--primary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .debug-close-btn:hover {
            color: white;
            transform: rotate(90deg);
        }

        .debug-section {
            margin-bottom: 1rem;
        }

        .debug-section-title {
            color: var(--accent);
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.85rem;
        }

        .debug-status {
            padding: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            margin-bottom: 0.5rem;
        }

        .debug-status.success {
            border-left: 3px solid #00ff88;
        }

        .debug-status.error {
            border-left: 3px solid #ff0055;
        }

        .debug-status.info {
            border-left: 3px solid var(--primary);
        }

        .debug-log {
            font-family: monospace;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.8);
            padding: 0.25rem 0;
        }

        .debug-button {
            background: var(--primary);
            border: none;
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            width: 100%;
            margin-top: 0.5rem;
            transition: all 0.3s;
        }

        .debug-button:hover {
            background: var(--accent);
            transform: translateY(-2px);
        }

        .debug-toggle-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: var(--primary);
            border: none;
            border-radius: 50%;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
            z-index: 9999;
            transition: all 0.3s;
        }

        .debug-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .cookie-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem;
            border-radius: 5px;
            margin-bottom: 0.5rem;
            font-family: monospace;
            font-size: 0.75rem;
            word-break: break-all;
        }

        @media (max-width: 768px) {
            .debug-panel {
                width: calc(100% - 40px);
                bottom: 10px;
                right: 10px;
                max-height: 300px;
            }

            .debug-toggle-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }

        /* ===== PASSWORD PROMPT MODAL ===== */
        .password-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20000;
            backdrop-filter: blur(5px);
        }

        .password-modal-content {
            background: rgba(10, 14, 39, 0.98);
            border: 2px solid var(--primary);
            border-radius: 20px;
            padding: 2.5rem;
            max-width: 400px;
            width: 90%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.7);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .password-modal-title {
            color: var(--primary);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            text-align: center;
        }

        .password-modal-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .password-input {
            width: 100%;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: white;
            font-size: 1rem;
            margin-bottom: 1rem;
            transition: all 0.3s;
        }

        .password-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 20px var(--primary);
        }

        .password-buttons {
            display: flex;
            gap: 1rem;
        }

        .password-btn {
            flex: 1;
            padding: 0.8rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .password-btn-submit {
            background: var(--primary);
            color: white;
        }

        .password-btn-submit:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px var(--accent);
        }

        .password-btn-cancel {
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .password-btn-cancel:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .password-error {
            color: #ff0055;
            font-size: 0.9rem;
            text-align: center;
            margin-top: 0.5rem;
            animation: shake 0.3s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .password-loading {
            color: var(--primary);
            font-size: 0.9rem;
            text-align: center;
            margin-top: 0.5rem;
        }

        /* Footer */
        .footer {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 3rem 2rem;
            color: rgba(255, 255, 255, 0.4);
            border-top: 1px solid var(--primary);
        }

        /* Orbital Planet Decoration */
        .orbital-planet {
            position: fixed;
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, #ffffff, var(--primary));
            box-shadow: 0 0 60px var(--primary),
                        inset -10px -10px 20px rgba(0, 0, 0, 0.4);
            z-index: 0;
            pointer-events: none;
            animation: orbit 60s linear infinite;
        }
        /* üåï ULTRA HIGH-QUALITY PHOTOREALISTIC MOON */
        .orbital-planet {
            position: fixed;
            width: 180px;
            height: 180px;
            border-radius: 50%;
            z-index: 0;
            pointer-events: none;
            overflow: visible;
            
            background: 
                radial-gradient(circle at 32% 32%, rgba(255, 255, 255, 0.95) 0%, transparent 4%),
                radial-gradient(circle at 68% 42%, rgba(255, 255, 255, 0.85) 0%, transparent 3%),
                radial-gradient(circle at 45% 72%, rgba(255, 255, 255, 0.9) 0%, transparent 3.5%),
                radial-gradient(circle at 78% 68%, rgba(255, 255, 255, 0.75) 0%, transparent 2.5%),
                radial-gradient(circle at 25% 58%, rgba(255, 255, 255, 0.8) 0%, transparent 3%),
                radial-gradient(circle at 58% 28%, rgba(255, 255, 255, 0.7) 0%, transparent 2%),
                radial-gradient(ellipse at 35% 45%, rgba(60, 60, 65, 0.9) 0%, transparent 25%),
                radial-gradient(ellipse at 55% 55%, rgba(70, 70, 75, 0.8) 0%, transparent 20%),
                radial-gradient(ellipse at 48% 38%, rgba(65, 65, 70, 0.85) 0%, transparent 18%),
                radial-gradient(circle at 28% 28%, 
                    #fefefe 0%, 
                    #f8f8f8 15%, 
                    #ececec 30%, 
                    #d4d4d4 45%,
                    #b8b8b8 60%,
                    #9a9a9a 75%,
                    #7a7a7a 90%,
                    #5a5a5a 100%);
            
            box-shadow: 
                0 0 120px var(--primary),
                0 0 80px rgba(255, 255, 255, 0.4),
                0 0 50px var(--accent),
                inset -35px -35px 80px rgba(0, 0, 0, 0.9),
                inset -20px -20px 50px rgba(0, 0, 0, 0.7),
                inset -10px -10px 30px rgba(0, 0, 0, 0.5),
                inset 12px 12px 35px rgba(255, 255, 255, 0.5),
                inset 20px 20px 50px rgba(255, 255, 255, 0.3),
                inset 8px 8px 20px rgba(255, 255, 255, 0.6);
            
            filter: 
                drop-shadow(0 0 50px rgba(255, 255, 255, 0.6)) 
                contrast(1.2) 
                brightness(1.08)
                saturate(0.95);
            
            animation: orbit 60s linear infinite, moonGlow 8s ease-in-out infinite;
        }
        
        .orbital-planet::before {
            content: '';
            position: absolute;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            top: 36%;
            left: 46%;
            
            background: 
                radial-gradient(circle at 35% 35%, rgba(220, 220, 220, 0.8) 0%, transparent 15%),
                radial-gradient(circle at 50% 50%, rgba(180, 180, 180, 0.6) 0%, transparent 8%),
                radial-gradient(circle at 52% 52%, 
                    rgba(45, 45, 50, 0.95) 0%, 
                    rgba(55, 55, 60, 0.9) 30%, 
                    rgba(75, 75, 80, 0.7) 60%, 
                    transparent 85%);
            
            box-shadow: 
                inset -5px -5px 15px rgba(0, 0, 0, 0.9),
                inset 3px 3px 8px rgba(255, 255, 255, 0.3);
            
            filter: blur(0.4px);
        }
        
        .orbital-planet::after {
            content: '';
            position: absolute;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            top: 56%;
            left: 60%;
            
            background: 
                radial-gradient(circle at 40% 40%, rgba(255, 255, 255, 0.95) 0%, transparent 12%),
                radial-gradient(circle at 50% 50%, 
                    rgba(200, 200, 200, 0.9) 0%, 
                    rgba(150, 150, 150, 0.8) 25%,
                    rgba(100, 100, 105, 0.7) 50%, 
                    transparent 75%);
            
            box-shadow: 
                0 0 40px rgba(255, 255, 255, 0.6),
                inset -3px -3px 10px rgba(0, 0, 0, 0.9),
                inset 2px 2px 6px rgba(255, 255, 255, 0.4);
            
            filter: blur(0.3px);
        }
        
        @keyframes moonGlow {
            0%, 100% { 
                box-shadow: 
                    0 0 120px var(--primary),
                    0 0 80px rgba(255, 255, 255, 0.4),
                    0 0 50px var(--accent),
                    inset -35px -35px 80px rgba(0, 0, 0, 0.9),
                    inset -20px -20px 50px rgba(0, 0, 0, 0.7),
                    inset -10px -10px 30px rgba(0, 0, 0, 0.5),
                    inset 12px 12px 35px rgba(255, 255, 255, 0.5),
                    inset 20px 20px 50px rgba(255, 255, 255, 0.3),
                    inset 8px 8px 20px rgba(255, 255, 255, 0.6);
                
                filter: 
                    drop-shadow(0 0 50px rgba(255, 255, 255, 0.6)) 
                    contrast(1.2) 
                    brightness(1.08)
                    saturate(0.95);
            }
            
            50% { 
                box-shadow: 
                    0 0 160px var(--primary),
                    0 0 100px rgba(255, 255, 255, 0.6),
                    0 0 70px var(--accent),
                    0 0 40px var(--secondary),
                    inset -35px -35px 80px rgba(0, 0, 0, 0.85),
                    inset -20px -20px 50px rgba(0, 0, 0, 0.6),
                    inset -10px -10px 30px rgba(0, 0, 0, 0.4),
                    inset 12px 12px 35px rgba(255, 255, 255, 0.6),
                    inset 20px 20px 50px rgba(255, 255, 255, 0.4),
                    inset 8px 8px 20px rgba(255, 255, 255, 0.7);
                
                filter: 
                    drop-shadow(0 0 80px rgba(255, 255, 255, 0.8)) 
                    drop-shadow(0 0 40px var(--primary))
                    contrast(1.25) 
                    brightness(1.12)
                    saturate(1);
            }
        }
        
        @keyframes orbit {
            0% { 
                transform: rotate(0deg) translateX(250px) rotate(0deg); 
            }
            100% { 
                transform: rotate(360deg) translateX(250px) rotate(-360deg); 
            }
        }
        
        @media (max-width: 768px) {
            .orbital-planet {
                display: none;
            }
        }
        
        @media (max-width: 1200px) {
            @keyframes orbit {
                0% { 
                    transform: rotate(0deg) translateX(180px) rotate(0deg); 
                }
                100% { 
                    transform: rotate(360deg) translateX(180px) rotate(-360deg); 
                }
            }
        }
        /* Mobile Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 1.5rem 2rem;
                flex-direction: column;
                gap: 1rem;
            }

            .nav-section,
            .polls-section {
                padding: 3rem 2rem;
            }

            .nav-grid {
                grid-template-columns: 1fr;
            }

            .orbital-planet {
                display: none;
            }

            .controls-panel {
                top: 1rem;
                right: 1rem;
                padding: 1rem;
                min-width: 200px;
            }

            .controls-toggle {
                top: 1rem;
                right: 1rem;
                width: 45px;
                height: 45px;
            }

            .theme-btn {
                width: 36px;
                height: 36px;
            }

            .theme-options {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Scroll to Top -->
<button class="scroll-to-top" id="scrollToTop" aria-label="Scroll to top"></button>
    <!-- Starfield -->
    <div class="starfield" id="starfield"></div>

    <!-- Cursor Gravity Effect -->
    <div id="cursorGravity"></div>

    <!-- Orbital Planet -->
    <div class="orbital-planet" style="top: 50%; left: 50%;"></div>

    <!-- Controls Toggle Button (shows when menu is closed) -->
    <button class="controls-toggle" id="controlsToggle" aria-label="Open Controls">‚öôÔ∏è</button>
    <!-- Header -->
<header class="header">
    <div class="logo">ASTRONOMY HUB</div>
    <div class="visitor-badge">
        <div>
            <div class="visitor-count" id="visitorCount">0</div>
            <div class="visitor-label">Active Now</div>
        </div>
    </div>
</header>

<!-- Main Navigation -->
<nav class="main-nav">
    <div class="nav-container">
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle Menu">
            ‚ò∞
        </button>
        <ul class="nav-links" id="navLinks">
            <li>
                <a href="index.html" class="nav-link active">
                    <span class="nav-icon">üè†</span>
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="geolocation_visualizer.html" class="nav-link">
                    <span class="nav-icon">üåç</span>
                    <span>Geolocation NEWü•≥</span>
                </a>
            </li>
            <li>
                <a href="movies.html" class="nav-link">
                    <span class="nav-icon">üé¨</span>
                    <span>Movies & Shows</span>
                </a>
            </li>
            <li>
                <a href="games.html" class="nav-link">
                    <span class="nav-icon">üéÆ</span>
                    <span>Games</span>
                </a>
            </li>
            <li>
                <a href="navigation/chatroom.html" class="nav-link">
                    <span class="nav-icon">üí¨</span>
                    <span>Chatroom</span>
                </a>
            </li>
            <li>
                <a href="Cheats/cheats.html" class="nav-link">
                    <span class="nav-icon">üîì</span>
                    <span>Cheats</span>
                </a>
            </li>
            <li>
                <a href="information.html" class="nav-link">
                    <span class="nav-icon">‚ÑπÔ∏è</span>
                    <span>Information</span>
                </a>
            </li>
            <li>
                <a href="support.html" class="nav-link">
                    <span class="nav-icon">üÜò</span>
                    <span>Support</span>
                </a>
            </li>
        </ul>
    </div>
</nav>
    <!-- Controls Panel -->
    <div class="controls-panel" id="controlsPanel">
        <div class="controls-header">
            <span class="control-label" style="margin-bottom: 0;">Cosmic Themes</span>
            <button class="controls-close" id="controlsClose" aria-label="Close Controls">√ó</button>
        </div>
        <div class="theme-options">
            <button class="theme-btn theme-nebula-btn active" data-theme="theme-nebula" title="Nebula" aria-label="Nebula Theme"></button>
            <button class="theme-btn theme-aurora-btn" data-theme="theme-aurora" title="Aurora" aria-label="Aurora Theme"></button>
            <button class="theme-btn theme-supernova-btn" data-theme="theme-supernova" title="Supernova" aria-label="Supernova Theme"></button>
            <button class="theme-btn theme-galaxy-btn" data-theme="theme-galaxy" title="Galaxy" aria-label="Galaxy Theme"></button>
            <button class="theme-btn theme-creme-btn" data-theme="theme-creme" title="Creme" aria-label="Creme Theme"></button>
            <button class="theme-btn theme-void-btn" data-theme="theme-void" title="Void" aria-label="Void Theme"></button>
            <button class="theme-btn theme-plasma-btn" data-theme="theme-plasma" title="Plasma" aria-label="Plasma Theme"></button>
            <button class="theme-btn theme-solar-btn" data-theme="theme-solar" title="Solar" aria-label="Solar Theme"></button>
            <button class="theme-btn theme-lunar-btn" data-theme="theme-lunar" title="Lunar" aria-label="Lunar Theme"></button>
            <button class="theme-btn theme-cosmic-btn" data-theme="theme-cosmic" title="Cosmic" aria-label="Cosmic Theme"></button>
        </div>
        <span class="control-label">Font Style</span>
        <div class="font-selector">
            <select class="font-dropdown" id="fontSelector" aria-label="Select Font">
                <option value="DripOctober">Drip October</option>
                <option value="Chainsaw Carnage">Chainsaw Carnage</option>
                <option value="Halloween">Halloween</option>
                <option value="CrotahItalic">Crotah Italic</option>
                <option value="Dangernight">Dangernight</option>
                <option value="HeavyJack">Heavy Jack</option>
                <option value="Marlita">Marlita</option>
                <option value="MockBear">Mock Bear</option>
                <option value="Mulinarstamp">Mulinarstamp</option>
                <option value="UnderThreat">Under Threat</option>
                <option value="BlackDahlia">Black Dahlia</option>
            </select>
        </div>
        <span class="control-label">Background Style</span>
        <div class="background-selector">
            <select class="background-dropdown" id="backgroundSelector" aria-label="Select Background">
                <option value="stars">Starfield (Default)</option>
                <option value="rain">Rainy Day</option>
                <option value="rocket">Rocket Ship</option>
                <option value="snow">Snowfall</option>
                <option value="matrix">Matrix Code</option>
                <option value="nebula">Nebula Cloud</option>
                <option value="pixel">Pixel Art</option>
                <option value="aurora">Aurora Waves</option>
                <option value="meteor">Meteor Shower</option>
                <option value="fireflies">Fireflies Night</option>
                <option value="underwater">Underwater</option>
                <option value="lightning">Lightning Storm</option>
                <option value="cherry">Cherry Blossom</option>
                <option value="vortex">Cosmic Vortex</option>
                <option value="penguin">Antarctic Penguin</option>
            </select>
        </div>
    </div>

    <!-- Hero -->
    <section class="hero">
        <h1 class="hero-title">KRIPTIC EDITION 3.0</h1>
        <p class="hero-subtitle">VERSION 3.0</p>
        <p class="hero-description">
            Your professional gateway to entertainment, games, and community interaction. 
            Built with precision and designed for excellence.
        </p>
    </section>
<!-- AdSense Ad Unit 1 -->
<div style="text-align: center; padding: 2rem 0; position: relative; z-index: 10;">
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="ca-pub-7452690493067355"
         data-ad-slot="5169295107"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
</div>
    <!-- Navigation -->
    <section class="nav-section">
        <div class="nav-grid">
            <!-- Movies -->
            <a href="movies.html" class="nav-card" target="_blank">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 4v16M17 4v16M3 8h4m10 0h4M3 12h18M3 16h4m10 0h4M4 20h16a1 1 0 001-1V5a1 1 0 00-1-1H4a1 1 0 00-1 1v14a1 1 0 001 1z" />
                </svg>
                <h3 class="nav-title">Movies & Shows</h3>
                <p class="nav-description">
                    176+ curated movies and TV shows in a premium Netflix-style interface. 
                    Updated regularly with new content.
                </p>
            </a>

            <!-- Games -->
            <a href="games.html" class="nav-card" target="_blank">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4a2 2 0 114 0v1a1 1 0 001 1h3a1 1 0 011 1v3a1 1 0 01-1 1h-1a2 2 0 100 4h1a1 1 0 011 1v3a1 1 0 01-1 1h-3a1 1 0 01-1-1v-1a2 2 0 10-4 0v1a1 1 0 01-1 1H7a1 1 0 01-1-1v-3a1 1 0 00-1-1H4a2 2 0 110-4h1a1 1 0 001-1V7a1 1 0 011-1h3a1 1 0 001-1V4z" />
                </svg>
                <h3 class="nav-title">Games</h3>
                <p class="nav-description">
                    50+ embedded games with instant launch technology. 
                    From classics to modern favorites.
                </p>
            </a>

            <!-- Information -->
            <a href="information.html" class="nav-card" target="_blank">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
                <h3 class="nav-title">Information</h3>
                <p class="nav-description">
                    Platform details, development journey, and technical specifications. 
                    600+ days of dedication.
                </p>
            </a>

            <!-- Support -->
            <a href="support.html" class="nav-card" target="_blank">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z" />
                </svg>
                <h3 class="nav-title">Support</h3>
                <p class="nav-description">
                    Get help, report issues, and connect with the community. 
                    We're here to assist.
                </p>
            </a>

            <!-- Cheats -->
            <a href="Cheats/cheats.html" class="nav-card" target="_blank">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
                <h3 class="nav-title">Cheats</h3>
                <p class="nav-description">
                    Game cheats, tools, and utilities. 
                    Enhance your gaming experience.
                </p>
            </a>
        <!-- AdSense Ad Unit 2 -->
        <div style="text-align: center; padding: 2rem 0; position: relative; z-index: 10;">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-7452690493067355"
                 data-ad-slot="4121589709"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
        </div>
            <!-- Polls -->
            <a href="#polls" class="nav-card">
                <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
                <h3 class="nav-title">Community Polls</h3>
                <p class="nav-description">
                    Vote on polls and see real-time results. 
                    Your voice matters to the community.
                </p>
            </a>
        </div>
    </section>

    <!-- Polls Section -->
    <section class="polls-section" id="polls">
        <div class="polls-header">
            <h2 class="polls-title">Community Polls</h2>
            <p class="polls-subtitle">Make your voice heard</p>
        </div>
        <div id="pollContainer">
            <div class="poll-loading">Loading polls...</div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p>KRIPTIC EDITION 3.0 ¬© 2025 | Built with dedication over 600+ days</p>
    </footer>

    <!-- Debug Panel Toggle Button -->
    <button id="debugToggle" class="debug-toggle-btn" onclick="toggleDebugPanel()">üîç</button>

    <!-- Debug Panel -->
    <div id="debugPanel" class="debug-panel" style="display: none;">
        <div class="debug-panel-header">
            <div class="debug-panel-title">üìä Poll System Status</div>
            <button class="debug-close-btn" onclick="toggleDebugPanel()">√ó</button>
        </div>

        <div class="debug-section">
            <div class="debug-section-title">System Status</div>
            <div id="systemStatus" class="debug-status info">
                <div class="debug-log">Initializing...</div>
            </div>
        </div>

        <div class="debug-section">
            <div class="debug-section-title">Your Vote Cookies üç™</div>
            <div id="cookieList" style="max-height: 150px; overflow-y: auto;">
                <div class="debug-log">Loading cookies...</div>
            </div>
        </div>

        <div class="debug-section">
            <div class="debug-section-title">Recent Activity</div>
            <div id="activityLog" style="max-height: 100px; overflow-y: auto;">
                <div class="debug-log">No activity yet</div>
            </div>
        </div>

        <div class="debug-section">
            <div class="debug-section-title">üåç Visitor Geolocation</div>
            <div style="margin-bottom: 0.5rem;">
                <button class="debug-button" onclick="loadVisitorGeolocation()">üìä Load Recent Visitors</button>
                <button class="debug-button" onclick="exportGeolocationData()">üíæ Export All Data</button>
            </div>
            <div id="geolocationData" style="max-height: 200px; overflow-y: auto; font-size: 0.85rem;">
                <div class="debug-log">Click "Load Recent Visitors" to view data</div>
            </div>
            <div style="margin-top: 0.5rem; font-size: 0.75rem; color: rgba(255,255,255,0.5);">
                üí° Export data as JSON for visualization tools
            </div>
        </div>

        <div class="debug-section">
            <div class="debug-section-title">Test Tools</div>
            <button class="debug-button" onclick="clearAllPollCookies()">üóëÔ∏è Clear All Poll Cookies</button>
            <button class="debug-button" onclick="refreshPollStatus()">üîÑ Refresh Status</button>
        </div>
    </div>

    <!-- Philosophical Quote Footer -->
    <div style="position: relative; z-index: 10; text-align: center; padding: 4rem 2rem 2rem; background: rgba(10, 14, 39, 0.95); border-top: 1px solid var(--primary); margin-top: 2rem;">
        <div style="max-width: 900px; margin: 0 auto; font-style: italic; color: rgba(255, 255, 255, 0.7); font-size: 1.1rem; line-height: 1.8; text-shadow: 0 0 10px var(--primary);">
            "He who walketh 'mongst the filth of swine, where rot is sacred and madness ferments, knoweth well their plague born secrets. For only in wading through corruption can one hear the truths that clean men fear to speak."
        </div>
        <div style="margin-top: 1rem; color: var(--primary); font-size: 0.9rem;">‚Äî Roland</div>
    </div>

    <script>
        // Google Analytics
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-Z2W798YNJP');

        // ===== ANTI-INSPECT ELEMENT PROTECTION =====
        let isDebugAuthenticated = false;

        document.addEventListener('contextmenu', function(e) {
            if (!isDebugAuthenticated) {
                e.preventDefault();
                return false;
            }
        });

        document.addEventListener('keydown', function(e) {
            if (!isDebugAuthenticated) {
                if (e.keyCode === 123 || 
                    (e.ctrlKey && e.shiftKey && e.keyCode === 73) || 
                    (e.ctrlKey && e.shiftKey && e.keyCode === 74) || 
                    (e.ctrlKey && e.shiftKey && e.keyCode === 67) || 
                    (e.ctrlKey && e.keyCode === 85)) {
                    e.preventDefault();
                    return false;
                }
            }
        });

        document.addEventListener('selectstart', function(e) {
            if (!isDebugAuthenticated) {
                e.preventDefault();
                return false;
            }
        });

        document.addEventListener('copy', function(e) {
            if (!isDebugAuthenticated) {
                e.preventDefault();
                return false;
            }
        });

        setInterval(function() {
            try {
                if (window.console && typeof console.clear === 'function') {
                    console.clear();
                }
            } catch (e) {}
        }, 2000);

        // ===== DYNAMIC THEME LOADER SYSTEM =====
        const ThemeManager = {
            loadedScripts: {},
            currentTheme: null,
            
            themeMapping: {
                'stars': { file: 'starfield', func: 'theme_starfield' },
                'rain': { file: 'rainy-day', func: 'theme_rainy_day' },
                'rocket': { file: 'rocket-ship', func: 'theme_rocket_ship' },
                'snow': { file: 'snowfall', func: 'theme_snowfall' },
                'matrix': { file: 'matrix-code', func: 'theme_matrix_code' },
                'nebula': { file: 'nebula-cloud', func: 'theme_nebula_cloud' },
                'pixel': { file: 'pixel-art', func: 'theme_pixel_art' },
                'aurora': { file: 'aurora-waves', func: 'theme_aurora_waves' },
                'meteor': { file: 'meteor-shower', func: 'theme_meteor_shower' },
                'fireflies': { file: 'fireflies-night', func: 'theme_fireflies_night' },
                'underwater': { file: 'underwater', func: 'theme_underwater' },
                'lightning': { file: 'lightning-storm', func: 'theme_lightning_storm' },
                'cherry': { file: 'cherry-blossom', func: 'theme_cherry_blossom' },
                'vortex': { file: 'cosmic-vortex', func: 'theme_cosmic_vortex' }
                'penguin': { file: 'theme_penguin', func: 'theme_penguin' }
            },
            
            async loadTheme(themeName) {
                try {
                    console.log(`üé® Loading theme: ${themeName}`);
                    
                    const themeConfig = this.themeMapping[themeName];
                    if (!themeConfig) {
                        console.error(`Theme not found: ${themeName}`);
                        return;
                    }
                    
                    // Check if already loaded
                    if (this.loadedScripts[themeName]) {
                        console.log(`‚úÖ Theme cached: ${themeName}`);
                        this.executeTheme(themeName);
                        return;
                    }
                    
                    // Load the script
                    await this.loadScript(themeConfig.file, themeName);
                    
                    // Execute the theme
                    this.executeTheme(themeName);
                    
                } catch (error) {
                    console.error(`‚ùå Failed to load theme ${themeName}:`, error);
                    
                    // Fallback to stars if not already stars
                    if (themeName !== 'stars') {
                        console.log('üîÑ Falling back to stars...');
                        this.loadTheme('stars');
                    }
                }
            },
            
            loadScript(fileName, themeName) {
                return new Promise((resolve, reject) => {
                    // Check if already loaded via window flag
                    if (window.themesLoaded && window.themesLoaded[themeName]) {
                        console.log(`‚úÖ Theme already loaded: ${themeName}`);
                        this.loadedScripts[themeName] = true;
                        resolve();
                        return;
                    }
                    
                    const script = document.createElement('script');
                    script.src = `Themes/${fileName}.js`;
                    script.onload = () => {
                        this.loadedScripts[themeName] = true;
                        console.log(`‚úÖ Script loaded: ${fileName}.js`);
                        resolve();
                    };
                    script.onerror = () => {
                        reject(new Error(`Failed to load ${fileName}.js`));
                    };
                    
                    document.head.appendChild(script);
                });
            },
            
            executeTheme(themeName) {
                const themeConfig = this.themeMapping[themeName];
                if (!themeConfig) return;
                
                // Clean up previous theme
                this.cleanup();
                
                // Execute theme function
                if (typeof window[themeConfig.func] === 'function') {
                    window[themeConfig.func]();
                    this.currentTheme = themeName;
                    
                    // Save to localStorage (instant)
                    localStorage.setItem('kripticBackground', themeName);
                    
                    // Save to Supabase (async, non-blocking)
                    this.saveToSupabase(themeName);
                    
                    console.log(`‚úÖ Theme activated: ${themeName}`);
                } else {
                    console.error(`Theme function not found: ${themeConfig.func}`);
                }
            },
            
            cleanup() {
                const starfield = document.getElementById('starfield');
                if (starfield) {
                    starfield.innerHTML = '';
                    starfield.style.background = '';
                }
                
                // Remove theme-specific styles
                document.querySelectorAll('style[data-theme]').forEach(style => style.remove());
            },
            
            async saveToSupabase(themeName) {
                try {
                    if (typeof pollSupabase === 'undefined' || !pollSupabase) {
                        console.warn('‚ö†Ô∏è Supabase not initialized yet');
                        return;
                    }
                    
                    const userId = this.generateUserId();
                    
                    const { error } = await pollSupabase
                        .from('user_preferences')
                        .upsert({
                            user_id: userId,
                            background_type: themeName,
                            updated_at: new Date().toISOString()
                        }, {
                            onConflict: 'user_id'
                        });
                    
                    if (error) {
                        console.warn('Supabase save error:', error);
                    } else {
                        console.log('‚úÖ Theme saved to Supabase:', themeName);
                    }
                } catch (err) {
                    console.warn('Supabase save exception:', err);
                }
            },
            
            generateUserId() {
                let userId = sessionStorage.getItem('userId');
                if (!userId) {
                    userId = 'user_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
                    sessionStorage.setItem('userId', userId);
                }
                return userId;
            },
            
            async loadFromSupabase() {
                try {
                    if (typeof pollSupabase === 'undefined' || !pollSupabase) {
                        console.warn('‚ö†Ô∏è Supabase not initialized, using localStorage only');
                        return null;
                    }
                    
                    const userId = this.generateUserId();
                    
                    const { data, error } = await pollSupabase
                        .from('user_preferences')
                        .select('background_type')
                        .eq('user_id', userId)
                        .single();
                    
                    if (data && data.background_type) {
                        console.log('‚úÖ Loaded theme from Supabase:', data.background_type);
                        return data.background_type;
                    }
                } catch (err) {
                    console.warn('Supabase load exception:', err);
                }
                return null;
            }
        };

        // Global function for easy access
        async function changeBackground(type) {
            await ThemeManager.loadTheme(type);
        }

        // Load saved background
        async function loadSavedBackground() {
            // Try localStorage first (instant)
            let savedBackground = localStorage.getItem('kripticBackground');
            
            // Try Supabase (async, may override)
            setTimeout(async () => {
                const supabaseTheme = await ThemeManager.loadFromSupabase();
                if (supabaseTheme && supabaseTheme !== savedBackground) {
                    savedBackground = supabaseTheme;
                    const backgroundSelector = document.getElementById('backgroundSelector');
                    if (backgroundSelector) {
                        backgroundSelector.value = savedBackground;
                    }
                    await changeBackground(savedBackground);
                }
            }, 1000);
            
            // Load theme immediately from localStorage
            if (!savedBackground) {
                savedBackground = 'stars';
            }
            
            const backgroundSelector = document.getElementById('backgroundSelector');
            if (backgroundSelector) {
                backgroundSelector.value = savedBackground;
            }
            
            await changeBackground(savedBackground);
        }

        // ===== CURSOR GRAVITY =====
        const cursorGravity = document.getElementById('cursorGravity');
        document.addEventListener('mousemove', (e) => {
            cursorGravity.style.transform = `translate(${e.clientX - 150}px, ${e.clientY - 150}px)`;
        });

        // ===== CARD MOUSE TRACKING =====
        document.querySelectorAll('.nav-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = ((e.clientX - rect.left) / rect.width) * 100;
                const y = ((e.clientY - rect.top) / rect.height) * 100;
                card.style.setProperty('--mouse-x', x + '%');
                card.style.setProperty('--mouse-y', y + '%');
            });
        });

        // ===== SCROLL TO TOP BUTTON =====
        const scrollToTopBtn = document.getElementById('scrollToTop');
        
        window.addEventListener('scroll', () => {
            if (window.pageYOffset > 300) {
                scrollToTopBtn.classList.add('visible');
            } else {
                scrollToTopBtn.classList.remove('visible');
            }
        });
        
        scrollToTopBtn.addEventListener('click', () => {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });

        // ===== THEME SWITCHER =====
        const themeButtons = document.querySelectorAll('.theme-btn');
        const body = document.body;
        const controlsPanel = document.getElementById('controlsPanel');
        const controlsToggle = document.getElementById('controlsToggle');
        const controlsClose = document.getElementById('controlsClose');

        controlsClose.addEventListener('click', () => {
            controlsPanel.classList.add('collapsed');
            controlsToggle.classList.add('visible');
        });

        controlsToggle.addEventListener('click', () => {
            controlsPanel.classList.remove('collapsed');
            controlsToggle.classList.remove('visible');
        });

        const savedTheme = localStorage.getItem('kripticTheme') || 'theme-nebula';
        body.className = savedTheme;
        themeButtons.forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.theme === savedTheme) {
                btn.classList.add('active');
            }
        });

        themeButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const theme = btn.dataset.theme;
                body.className = theme;
                
                themeButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                localStorage.setItem('kripticTheme', theme);
            });
        });

        // ===== FONT SELECTOR =====
        const fontSelector = document.getElementById('fontSelector');
        const savedFont = localStorage.getItem('kripticFont') || 'DripOctober';
        document.body.style.fontFamily = `'${savedFont}', 'Segoe UI', sans-serif`;
        fontSelector.value = savedFont;

        fontSelector.addEventListener('change', (e) => {
            const selectedFont = e.target.value;
            document.body.style.fontFamily = `'${selectedFont}', 'Segoe UI', sans-serif`;
            localStorage.setItem('kripticFont', selectedFont);
        });

        // ===== FIREBASE VISITOR COUNTER =====
        const firebaseConfig = {
            apiKey: "AIzaSyBf86NMHrnOCUui_2VFF00wwehencFzF0Y",
            authDomain: "kriptic-edition.firebaseapp.com",
            databaseURL: "https://kriptic-edition-default-rtdb.firebaseio.com",
            projectId: "kriptic-edition",
            storageBucket: "kriptic-edition.firebasestorage.app",
            messagingSenderId: "208515615130",
            appId: "1:208515615130:web:2f94d2afdea3a668f91223"
        };

        try {
            if (typeof firebase !== 'undefined' && firebase.initializeApp) {
                firebase.initializeApp(firebaseConfig);
                console.log('‚úÖ Firebase initialized');
                
                const database = firebase.database();
                const visitorsRef = database.ref('visitors');
                const sessionId = Date.now() + '-' + Math.random().toString(36).substr(2, 9);

                visitorsRef.child(sessionId).set({
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                }).then(() => {
                    console.log('‚úÖ Visitor registered in Firebase');
                }).catch((error) => {
                    console.error('‚ùå Failed to register visitor:', error);
                });

                window.addEventListener('beforeunload', () => {
                    visitorsRef.child(sessionId).remove();
                });

                visitorsRef.on('value', (snapshot) => {
                    const count = snapshot.numChildren();
                    document.getElementById('visitorCount').textContent = count;
                }, (error) => {
                    console.error('‚ùå Firebase read error:', error);
                    document.getElementById('visitorCount').textContent = '?';
                });

                setInterval(() => {
                    const fiveMinutesAgo = Date.now() - 5 * 60 * 1000;
                    visitorsRef.once('value', (snapshot) => {
                        snapshot.forEach((child) => {
                            if (child.val().timestamp < fiveMinutesAgo) {
                                child.ref.remove();
                            }
                        });
                    });
                }, 60000);
            }
        } catch (firebaseError) {
            console.error('‚ùå Firebase initialization error:', firebaseError);
            document.getElementById('visitorCount').textContent = '?';
        }

        // ===== IP GEOLOCATION TRACKING =====
        async function trackVisitorGeolocation() {
            try {
                console.log('üåç Fetching IP and geolocation data...');
                
                const response = await fetch('https://ipapi.co/json/');
                
                if (!response.ok) {
                    throw new Error('Failed to fetch geolocation data');
                }
                
                const geoData = await response.json();
                
                console.log('‚úÖ Geolocation data received:', {
                    ip: geoData.ip,
                    country: geoData.country_name,
                    city: geoData.city
                });
                
                const visitorData = {
                    ip_address: geoData.ip || 'Unknown',
                    country: geoData.country_name || 'Unknown',
                    country_code: geoData.country_code || 'XX',
                    region: geoData.region || 'Unknown',
                    city: geoData.city || 'Unknown',
                    latitude: geoData.latitude || 0,
                    longitude: geoData.longitude || 0,
                    timezone: geoData.timezone || 'Unknown',
                    isp: geoData.org || 'Unknown',
                    user_agent: navigator.userAgent,
                    screen_resolution: `${screen.width}x${screen.height}`,
                    language: navigator.language || 'Unknown',
                    visited_at: new Date().toISOString()
                };
                
                if (pollSupabase) {
                    const { data, error } = await pollSupabase
                        .from('visitor_geolocation')
                        .insert([visitorData]);
                    
                    if (error) {
                        console.error('‚ùå Failed to store geolocation in Supabase:', error);
                        addActivityLog(`‚ùå Geolocation storage failed: ${error.message}`);
                    } else {
                        console.log('‚úÖ Visitor geolocation stored in Supabase');
                        addActivityLog(`üåç Visitor from ${geoData.city}, ${geoData.country_name} tracked`);
                    }
                } else {
                    console.warn('‚ö†Ô∏è Supabase not initialized, skipping geolocation storage');
                }
                
                return geoData;
                
            } catch (error) {
                console.error('‚ùå Geolocation tracking error:', error);
                addActivityLog(`‚ùå Geolocation tracking failed: ${error.message}`);
                return null;
            }
        }

        // ===== KEYBOARD SHORTCUTS =====
        document.addEventListener('keydown', (e) => {
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                return;
            }
            
            if (e.altKey && e.key === 't') {
                e.preventDefault();
                const panel = document.getElementById('controlsPanel');
                const toggle = document.getElementById('controlsToggle');
                
                if (panel.classList.contains('collapsed')) {
                    panel.classList.remove('collapsed');
                    toggle.classList.remove('visible');
                } else {
                    panel.classList.add('collapsed');
                    toggle.classList.add('visible');
                }
            }
            
            if (e.altKey && e.key === 'd') {
                e.preventDefault();
                toggleDebugPanel();
            }
            
            if (e.key === 'Escape') {
                const navLinks = document.getElementById('navLinks');
                if (navLinks) navLinks.classList.remove('active');
            }
        });

        // ===== MOBILE NAVIGATION =====
        const mobileMenuToggle = document.getElementById('mobileMenuToggle');
        const navLinks = document.getElementById('navLinks');
        
        if (mobileMenuToggle && navLinks) {
            mobileMenuToggle.addEventListener('click', (e) => {
                e.stopPropagation();
                navLinks.classList.add('active');
            });

            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', () => {
                    navLinks.classList.remove('active');
                });
            });

            document.addEventListener('click', (e) => {
                if (!e.target.closest('.main-nav')) {
                    navLinks.classList.remove('active');
                }
            });
        }

        // ===== ACTIVE NAV HIGHLIGHTING =====
        const currentPage = window.location.pathname.split('/').pop() || 'index.html';
        document.querySelectorAll('.nav-link').forEach(link => {
            const linkPage = link.getAttribute('href').split('/').pop();
            if (linkPage === currentPage) {
                link.classList.add('active');
            }
        });

        // ===== POLL SYSTEM V2 =====
        const SUPABASE_URL = 'https://zkrdbvjmessktzlxommr.supabase.co';
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InprcmRidmptZXNza3R6bHhvbW1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI4ODMzNzUsImV4cCI6MjA2ODQ1OTM3NX0.XDNQGD7Jl-2zmjFyfGVFRjdq-9rVFfhCyExfO8Fzb7Q';

        let pollSupabase;
        let polls = [];
        let selectedOptions = {};
        let votingInProgress = new Set();

        // ===== COOKIE FUNCTIONS =====
        function setCookie(name, value, days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            const expires = "expires=" + date.toUTCString();
            document.cookie = name + "=" + value + ";" + expires + ";path=/;SameSite=Strict";
            console.log(`üç™ Cookie set: ${name} = ${value} (expires in ${days} days)`);
            
            if (typeof updateCookieList === 'function') {
                updateCookieList();
            }
        }

        function getCookie(name) {
            const nameEQ = name + "=";
            const ca = document.cookie.split(';');
            for (let i = 0; i < ca.length; i++) {
                let c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }

        function hasVoted(pollId) {
            return getCookie(`pollVoted_${pollId}`) === 'true';
        }

        function markAsVoted(pollId) {
            setCookie(`pollVoted_${pollId}`, 'true', 365);
        }

        function initializePollSupabase() {
            try {
                if (window.supabase && typeof window.supabase.createClient === 'function') {
                    pollSupabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                    console.log('‚úÖ Supabase initialized successfully');
                } else {
                    console.error('‚ùå Supabase library not loaded, retrying...');
                    setTimeout(initializePollSupabase, 500);
                }
            } catch (error) {
                console.error('‚ùå Error initializing Supabase:', error);
                setTimeout(initializePollSupabase, 500);
            }
        }

        async function fetchPolls() {
            try {
                console.log('üì• Fetching polls from Supabase...');
                
                const { data, error } = await pollSupabase
                    .from('polls')
                    .select('*')
                    .eq('active', true)
                    .order('created_at', { ascending: false });

                if (error) {
                    console.error('‚ùå Supabase error:', error);
                    throw error;
                }
                
                console.log('üìä Raw poll data from database:', data);
                
                if (!data || data.length === 0) {
                    console.warn('‚ö†Ô∏è No polls found in database');
                    polls = [];
                    renderPolls();
                    return;
                }
                
                polls = data.map(poll => {
                    const options = [];
                    const votes = [];
                    
                    for (let i = 1; i <= 5; i++) {
                        const optionKey = `option${i}`;
                        const voteKey = `votes${i}`;
                        
                        if (poll[optionKey]) {
                            options.push(poll[optionKey]);
                            votes.push(poll[voteKey] || 0);
                        }
                    }
                    
                    console.log(`‚úÖ Poll parsed: "${poll.question}" - ${options.length} options`);
                    
                    return {
                        id: poll.id,
                        question: poll.question,
                        options: options,
                        votes: votes,
                        created_at: poll.created_at
                    };
                });
                
                console.log(`‚úÖ ${polls.length} polls ready to display`);
                renderPolls();
            } catch (error) {
                console.error('‚ùå Failed to fetch polls:', error);
                showPollMessage('error', 'Failed to load polls. Check console for details.');
            }
        }

        function showPollMessage(type, message) {
            const container = document.getElementById('pollContainer');
            if (!container) return;
            
            const messageDiv = document.createElement('div');
            messageDiv.className = `poll-message ${type}`;
            messageDiv.textContent = message;
            
            container.insertBefore(messageDiv, container.firstChild);
            
            setTimeout(() => messageDiv.remove(), type === 'success' ? 3000 : 5000);
        }

        function selectPollOption(pollId, optionIndex) {
            if (votingInProgress.has(pollId)) return;
            
            console.log(`üëÜ Selected option ${optionIndex} for poll ${pollId}`);
            selectedOptions[pollId] = optionIndex;
            renderPolls();
        }

        async function submitPollVote(pollId) {
            const optionIndex = selectedOptions[pollId];

            if (hasVoted(pollId)) {
                showPollMessage('error', 'üö´ You already voted on this poll. One vote per person!');
                return;
            }
            
            if (optionIndex === undefined) {
                showPollMessage('error', '‚ö†Ô∏è Please select an option before voting');
                return;
            }

            if (votingInProgress.has(pollId)) return;
            votingInProgress.add(pollId);
            
            try {
                const poll = polls.find(p => p.id === pollId);
                if (!poll) throw new Error('Poll not found');
                
                console.log(`üó≥Ô∏è Submitting vote for option ${optionIndex + 1}...`);
                
                const voteColumn = `votes${optionIndex + 1}`;
                const currentVoteCount = poll.votes[optionIndex];
                const updateData = {};
                updateData[voteColumn] = currentVoteCount + 1;
                
                console.log('üì§ Updating database:', updateData);

                const { data, error } = await pollSupabase
                    .from('polls')
                    .update(updateData)
                    .eq('id', pollId)
                    .select();

                if (error) {
                    console.error('‚ùå Vote update failed:', error);
                    throw error;
                }
                
                console.log('‚úÖ Vote recorded successfully!', data);

                markAsVoted(pollId);
                delete selectedOptions[pollId];
                
                showPollMessage('success', '‚úÖ Vote submitted successfully! Thanks for participating!');
                
                await fetchPolls();
                
            } catch (error) {
                console.error('‚ùå Vote submission error:', error);
                showPollMessage('error', '‚ùå Vote failed: ' + error.message);
            } finally {
                votingInProgress.delete(pollId);
            }
        }

        function renderPolls() {
            const container = document.getElementById('pollContainer');
            if (!container) return;
            
            console.log(`üé® Rendering ${polls.length} polls...`);
            
            if (polls.length === 0) {
                container.innerHTML = `
                    <div class="poll-loading">
                        <p>üìä No polls available</p>
                        <p style="font-size: 0.9rem; margin-top: 1rem; color: rgba(255,255,255,0.5);">
                            Polls will appear here once added to the database
                        </p>
                    </div>
                `;
                return;
            }

            const pollsHTML = polls.map(poll => {
                const totalVotes = poll.votes.reduce((sum, count) => sum + count, 0);
                const selectedIndex = selectedOptions[poll.id];
                const isVoting = votingInProgress.has(poll.id);
                const hasVotedOnPoll = hasVoted(poll.id);

                const optionsHTML = poll.options.map((option, index) => {
                    const voteCount = poll.votes[index];
                    const percentage = totalVotes ? Math.round((voteCount / totalVotes) * 100) : 0;
                    const isSelected = selectedIndex === index;

                    return `
                        <div class="poll-option ${isSelected ? 'selected' : ''} ${hasVotedOnPoll ? 'disabled' : ''}" 
                             style="--vote-percent: ${percentage}%"
                             onclick="${hasVotedOnPoll ? '' : `selectPollOption('${poll.id}', ${index})`}"
                             role="button"
                             tabindex="0">
                            <span class="poll-option-text">${escapeHtml(option)}</span>
                            <div class="poll-option-stats">
                                <span class="poll-vote-count">${voteCount} vote${voteCount !== 1 ? 's' : ''}</span>
                                <span>${percentage}%</span>
                            </div>
                        </div>
                    `;
                }).join('');

                return `
                    <div class="poll-card">
                        ${hasVotedOnPoll ? '<div class="poll-message success">‚úÖ You already voted on this poll</div>' : ''}
                        <h3 class="poll-question">${escapeHtml(poll.question)}</h3>
                        <div class="poll-options">${optionsHTML}</div>
                        <div class="poll-actions">
                            <div class="poll-meta">
                                Total: ${totalVotes} vote${totalVotes !== 1 ? 's' : ''}
                            </div>
                            <button class="poll-submit-btn" 
                                    onclick="submitPollVote('${poll.id}')"
                                    ${isVoting || selectedIndex === undefined || hasVotedOnPoll ? 'disabled' : ''}>
                                ${isVoting ? '‚è≥ Submitting...' : hasVotedOnPoll ? 'üîí Already Voted' : 'üó≥Ô∏è Submit Vote'}
                            </button>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = pollsHTML;
            console.log('‚úÖ Polls rendered successfully');
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        window.selectPollOption = selectPollOption;
        window.submitPollVote = submitPollVote;

        // ===== DEBUG PANEL FUNCTIONS =====
        let activityLogs = [];
        let debugPassword = null;

        async function fetchDebugPassword() {
            try {
                const { data, error } = await pollSupabase
                    .from('debug_config')
                    .select('setting_value')
                    .eq('setting_name', 'debug_password')
                    .single();

                if (error) {
                    console.error('Failed to fetch debug password:', error);
                    return null;
                }

                return data?.setting_value || null;
            } catch (error) {
                console.error('Error fetching debug password:', error);
                return null;
            }
        }

        function showPasswordPrompt() {
            const modal = document.createElement('div');
            modal.className = 'password-modal';
            modal.id = 'passwordModal';
            
            modal.innerHTML = `
                <div class="password-modal-content">
                    <div class="password-modal-title">üîê Debug Panel Access</div>
                    <div class="password-modal-description">
                        This panel is restricted. Please enter the password to continue.
                    </div>
                    <input 
                        type="password" 
                        id="passwordInput" 
                        class="password-input" 
                        placeholder="Enter password..."
                        autocomplete="off"
                    />
                    <div id="passwordFeedback"></div>
                    <div class="password-buttons">
                        <button class="password-btn password-btn-cancel" onclick="closePasswordPrompt()">Cancel</button>
                        <button class="password-btn password-btn-submit" onclick="checkDebugPassword()">Unlock</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            
            setTimeout(() => {
                const input = document.getElementById('passwordInput');
                if (input) {
                    input.focus();
                    
                    input.addEventListener('keypress', (e) => {
                        if (e.key === 'Enter') {
                            checkDebugPassword();
                        }
                    });
                }
            }, 100);
        }

        function closePasswordPrompt() {
            const modal = document.getElementById('passwordModal');
            if (modal) {
                modal.remove();
            }
        }

        async function checkDebugPassword() {
            const input = document.getElementById('passwordInput');
            const feedback = document.getElementById('passwordFeedback');
            
            if (!input || !feedback) return;
            
            const enteredPassword = input.value;
            
            feedback.innerHTML = '<div class="password-loading">üîÑ Verifying...</div>';
            
            if (!debugPassword) {
                debugPassword = await fetchDebugPassword();
            }
            
            if (!debugPassword) {
                feedback.innerHTML = '<div class="password-error">‚ùå Failed to load password from database</div>';
                return;
            }
            
            if (enteredPassword === debugPassword) {
                feedback.innerHTML = '<div class="password-loading">‚úÖ Access granted! Protections disabled.</div>';
                
                sessionStorage.setItem('debugAuthenticated', 'true');
                isDebugAuthenticated = true;
                
                console.log('üîì DEBUG MODE ACTIVATED');
                console.log('‚úÖ Right-click enabled');
                console.log('‚úÖ Inspect element shortcuts enabled (F12, Ctrl+Shift+I, etc.)');
                console.log('‚úÖ Text selection enabled');
                console.log('‚úÖ Copy/paste enabled');
                
                addActivityLog('üîì Debug mode activated - All protections disabled');
                
                setTimeout(() => {
                    closePasswordPrompt();
                    openDebugPanel();
                }, 500);
            } else {
                feedback.innerHTML = '<div class="password-error">‚ùå Incorrect password. Try again.</div>';
                input.value = '';
                input.focus();
                
                input.style.animation = 'shake 0.3s';
                setTimeout(() => {
                    input.style.animation = '';
                }, 300);
            }
        }

        function toggleDebugPanel() {
            const sessionAuth = sessionStorage.getItem('debugAuthenticated');
            
            if (sessionAuth === 'true' || isDebugAuthenticated) {
                const panel = document.getElementById('debugPanel');
                const toggleBtn = document.getElementById('debugToggle');
                
                if (panel.style.display === 'none') {
                    openDebugPanel();
                } else {
                    panel.style.display = 'none';
                    toggleBtn.style.display = 'flex';
                }
            } else {
                showPasswordPrompt();
            }
        }

        function openDebugPanel() {
            const panel = document.getElementById('debugPanel');
            const toggleBtn = document.getElementById('debugToggle');
            
            panel.style.display = 'block';
            toggleBtn.style.display = 'none';
            refreshPollStatus();
        }

        window.closePasswordPrompt = closePasswordPrompt;
        window.checkDebugPassword = checkDebugPassword;

        function updateSystemStatus(message, type = 'info') {
            const statusDiv = document.getElementById('systemStatus');
            if (!statusDiv) return;
            
            statusDiv.className = `debug-status ${type}`;
            statusDiv.innerHTML = `<div class="debug-log">${message}</div>`;
        }

        function addActivityLog(message) {
            const timestamp = new Date().toLocaleTimeString();
            activityLogs.unshift(`[${timestamp}] ${message}`);
            
            if (activityLogs.length > 10) {
                activityLogs = activityLogs.slice(0, 10);
            }
            
            updateActivityLog();
        }

        function updateActivityLog() {
            const logDiv = document.getElementById('activityLog');
            if (!logDiv) return;
            
            if (activityLogs.length === 0) {
                logDiv.innerHTML = '<div class="debug-log">No activity yet</div>';
            } else {
                logDiv.innerHTML = activityLogs.map(log => 
                    `<div class="debug-log">${log}</div>`
                ).join('');
            }
        }

        function updateCookieList() {
            const cookieListDiv = document.getElementById('cookieList');
            if (!cookieListDiv) return;
            
            const allCookies = document.cookie.split(';');
            const pollCookies = allCookies.filter(cookie => 
                cookie.trim().startsWith('pollVoted_')
            );
            
            if (pollCookies.length === 0) {
                cookieListDiv.innerHTML = '<div class="debug-log">‚úÖ No poll cookies (you haven\'t voted yet)</div>';
            } else {
                cookieListDiv.innerHTML = pollCookies.map(cookie => {
                    const [name, value] = cookie.trim().split('=');
                    const pollId = name.replace('pollVoted_', '').substring(0, 8) + '...';
                    return `<div class="cookie-item">üç™ ${pollId} = ${value}</div>`;
                }).join('');
            }
        }

        function clearAllPollCookies() {
            if (!confirm('Are you sure you want to clear all poll vote cookies? You will be able to vote again.')) {
                return;
            }
            
            const allCookies = document.cookie.split(';');
            let cleared = 0;
            
            allCookies.forEach(cookie => {
                const cookieName = cookie.split('=')[0].trim();
                if (cookieName.startsWith('pollVoted_')) {
                    document.cookie = cookieName + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
                    cleared++;
                }
            });
            
            addActivityLog(`üóëÔ∏è Cleared ${cleared} poll cookie(s)`);
            updateCookieList();
            
            fetchPolls();
            
            alert(`‚úÖ Cleared ${cleared} poll cookies! You can vote again now.`);
        }

        function refreshPollStatus() {
            updateSystemStatus('üîÑ Refreshing...', 'info');
            updateCookieList();
            
            setTimeout(() => {
                if (pollSupabase) {
                    updateSystemStatus(`‚úÖ Connected | ${polls.length} poll(s) loaded`, 'success');
                } else {
                    updateSystemStatus('‚ùå Not connected to Supabase', 'error');
                }
            }, 500);
            
            addActivityLog('üîÑ Status refreshed');
        }

        async function loadVisitorGeolocation() {
            const container = document.getElementById('geolocationData');
            container.innerHTML = '<div class="debug-log">‚è≥ Loading visitor data...</div>';
            
            try {
                if (!pollSupabase) {
                    container.innerHTML = '<div class="debug-log" style="color: #ff6b6b;">‚ùå Supabase not connected</div>';
                    return;
                }
                
                const { data, error } = await pollSupabase
                    .from('visitor_geolocation')
                    .select('*')
                    .order('visited_at', { ascending: false })
                    .limit(50);
                
                if (error) {
                    container.innerHTML = `<div class="debug-log" style="color: #ff6b6b;">‚ùå Error: ${error.message}</div>`;
                    console.error('Geolocation fetch error:', error);
                    return;
                }
                
                if (!data || data.length === 0) {
                    container.innerHTML = '<div class="debug-log">üì≠ No visitor data yet. Data appears after first visit is tracked.</div>';
                    return;
                }
                
                let html = `<div style="margin-bottom: 0.5rem; font-weight: bold; color: #4ade80;">üìä ${data.length} Recent Visitors</div>`;
                
                const countryStats = {};
                data.forEach(visitor => {
                    const country = visitor.country || 'Unknown';
                    countryStats[country] = (countryStats[country] || 0) + 1;
                });
                
                html += '<div style="margin-bottom: 0.5rem; padding: 0.5rem; background: rgba(74, 222, 128, 0.1); border-radius: 4px;">';
                html += '<strong>By Country:</strong><br>';
                Object.entries(countryStats)
                    .sort((a, b) => b[1] - a[1])
                    .slice(0, 5)
                    .forEach(([country, count]) => {
                        html += `${country}: ${count} | `;
                    });
                html = html.slice(0, -3) + '</div>';
                
                data.slice(0, 20).forEach((visitor, index) => {
                    const date = new Date(visitor.visited_at);
                    const timeAgo = getTimeAgo(date);
                    
                    html += `
                        <div style="padding: 0.4rem; margin-bottom: 0.3rem; background: rgba(255,255,255,0.05); border-radius: 4px; border-left: 3px solid #4ade80;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <span style="font-weight: bold; color: #4ade80;">${visitor.city || 'Unknown'}, ${visitor.country || 'Unknown'}</span>
                                    <span style="color: rgba(255,255,255,0.5); font-size: 0.8rem; margin-left: 0.5rem;">${visitor.country_code || ''}</span>
                                </div>
                                <div style="font-size: 0.75rem; color: rgba(255,255,255,0.5);">${timeAgo}</div>
                            </div>
                            <div style="font-size: 0.75rem; color: rgba(255,255,255,0.6); margin-top: 0.2rem;">
                                IP: ${visitor.ip_address || 'Unknown'} | ISP: ${(visitor.isp || 'Unknown').substring(0, 30)}
                            </div>
                        </div>
                    `;
                });
                
                container.innerHTML = html;
                addActivityLog(`üìä Loaded ${data.length} visitor records`);
                
            } catch (err) {
                container.innerHTML = `<div class="debug-log" style="color: #ff6b6b;">‚ùå Error: ${err.message}</div>`;
                console.error('Error loading geolocation:', err);
            }
        }
        
        async function exportGeolocationData() {
            try {
                if (!pollSupabase) {
                    alert('‚ùå Supabase not connected');
                    return;
                }
                
                addActivityLog('üíæ Exporting geolocation data...');
                
                const { data, error } = await pollSupabase
                    .from('visitor_geolocation')
                    .select('*')
                    .order('visited_at', { ascending: false });
                
                if (error) {
                    alert(`‚ùå Export failed: ${error.message}`);
                    console.error('Export error:', error);
                    return;
                }
                
                if (!data || data.length === 0) {
                    alert('üì≠ No data to export yet');
                    return;
                }
                
                const json = JSON.stringify(data, null, 2);
                const blob = new Blob([json], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                
                const a = document.createElement('a');
                a.href = url;
                a.download = `visitor-geolocation-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                addActivityLog(`‚úÖ Exported ${data.length} visitor records`);
                alert(`‚úÖ Exported ${data.length} visitor records!\n\nFile saved as: ${a.download}`);
                
            } catch (err) {
                alert(`‚ùå Export failed: ${err.message}`);
                console.error('Export error:', err);
            }
        }
        
        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            
            if (seconds < 60) return 'Just now';
            if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
            if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
            if (seconds < 604800) return `${Math.floor(seconds / 86400)}d ago`;
            return date.toLocaleDateString();
        }

        window.toggleDebugPanel = toggleDebugPanel;
        window.clearAllPollCookies = clearAllPollCookies;
        window.refreshPollStatus = refreshPollStatus;
        window.loadVisitorGeolocation = loadVisitorGeolocation;
        window.exportGeolocationData = exportGeolocationData;

        // ===== INITIALIZE ON PAGE LOAD =====
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Kriptic Edition 3.0 Loading...');
            
            // Background selector event
            const backgroundSelector = document.getElementById('backgroundSelector');
            if (backgroundSelector) {
                backgroundSelector.addEventListener('change', async (e) => {
                    const selectedBackground = e.target.value;
                    await changeBackground(selectedBackground);
                });
            }
            
            // Check debug authentication
            if (sessionStorage.getItem('debugAuthenticated') === 'true') {
                isDebugAuthenticated = true;
                console.log('‚úÖ Debug mode active');
            }
            
            // Add moon micro-craters
            const moon = document.querySelector('.orbital-planet');
            if (moon) {
                const microCraters = [
                    { size: 12, top: '25%', left: '35%', opacity: 0.7 },
                    { size: 8, top: '45%', left: '68%', opacity: 0.6 },
                    { size: 15, top: '70%', left: '42%', opacity: 0.75 },
                    { size: 10, top: '62%', left: '78%', opacity: 0.65 }
                ];
                
                microCraters.forEach(crater => {
                    const craterEl = document.createElement('div');
                    craterEl.style.cssText = `
                        position: absolute;
                        width: ${crater.size}px;
                        height: ${crater.size}px;
                        top: ${crater.top};
                        left: ${crater.left};
                        border-radius: 50%;
                        background: radial-gradient(circle at 40% 40%, 
                            rgba(120, 120, 120, ${crater.opacity * 0.4}) 0%, 
                            rgba(60, 60, 60, ${crater.opacity * 0.8}) 50%, 
                            transparent 80%);
                        box-shadow: inset -${crater.size * 0.15}px -${crater.size * 0.15}px ${crater.size * 0.3}px rgba(0, 0, 0, 0.8);
                        filter: blur(0.2px);
                        pointer-events: none;
                    `;
                    moon.appendChild(craterEl);
                });
            }
            
            // Initialize debug panel
            updateSystemStatus('üîÑ Initializing...', 'info');
            updateCookieList();
            addActivityLog('üöÄ Page loaded');
            
            // Initialize Supabase and polls
            if (window.supabase) {
                initializePollSupabase();
                setTimeout(() => {
                    fetchPolls();
                }, 500);
            }
            
            // Track geolocation
            setTimeout(() => {
                trackVisitorGeolocation();
            }, 2000);
            
            // Load saved background
            setTimeout(() => {
                loadSavedBackground();
            }, 100);
        });
    </script>
    
    <!-- AdSense Ad Initialization -->
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
</body>
</html>
